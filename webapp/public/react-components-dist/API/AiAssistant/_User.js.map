{"version":3,"file":"_User.js","names":["_User","getChatRoom","_","FuxHTTP","get","concat","WEB_SERVER_URL","RESOLVE_DATA","REJECT_MESSAGE","refreshChatRoom","post","getMessages","room_id","limit","cursor","getMediaContentUrl","message_id","sendTextMessage","text","attachments","arguments","length","undefined","assistant_specific_prompt","mode","formData","FormData","append","map","a","xsrf_token","getCookie","Promise","resolve","reject","fetch","method","body","then","response","json","status","STATUS_SUCCESS","data","message","m","console","error"],"sources":["../../../react-components/API/AiAssistant/_User.jsx"],"sourcesContent":["export const _User = {\n    getChatRoom: _ => {\n        return FuxHTTP.get(\n            `${WEB_SERVER_URL}/ai-assistant/chat/get-chat-room`, {},\n            FuxHTTP.RESOLVE_DATA,\n            FuxHTTP.REJECT_MESSAGE\n        );\n    },\n    refreshChatRoom: _ => {\n        return FuxHTTP.post(\n            `${WEB_SERVER_URL}/ai-assistant/chat/refresh-chat-room`, {},\n            FuxHTTP.RESOLVE_DATA,\n            FuxHTTP.REJECT_MESSAGE\n        );\n    },\n    getMessages: (room_id, limit, cursor) => {\n        return FuxHTTP.get(\n            `${WEB_SERVER_URL}/ai-assistant/chat/get-messages`, {\n                room_id: room_id,\n                limit: limit,\n                cursor: cursor\n            },\n            FuxHTTP.RESOLVE_DATA,\n            FuxHTTP.REJECT_MESSAGE\n        );\n    },\n    getMediaContentUrl: (message_id) => {\n        return (`${WEB_SERVER_URL}/ai-assistant/chat/get-media-content?message_id=${message_id}`)\n    },\n    sendTextMessage: (room_id, text, attachments = [], assistant_specific_prompt = null, mode = null) => {\n        const formData = new FormData();\n        formData.append(\"room_id\", room_id);\n        formData.append(\"text\", text);\n        if(mode) formData.append(\"mode\", mode);\n        if (assistant_specific_prompt) formData.append('assistant_specific_prompt', assistant_specific_prompt);\n        if (attachments) {\n            attachments.map(a => {\n                formData.append(\"attachments[]\", a);\n            })\n        }\n        const xsrf_token = FuxHTTP.getCookie('XSRF-TOKEN');\n        if (xsrf_token) formData.append('_token', xsrf_token);\n\n        return new Promise((resolve, reject) => {\n            fetch(`${WEB_SERVER_URL}/ai-assistant/chat/send-text-message`, {\n                method: 'POST',\n                body: formData\n            })\n                .then(response => response.json())\n                .then(json => {\n                    json.status === FuxHTTP.STATUS_SUCCESS ? resolve(json.data) : reject(json.message);\n                })\n                .catch(m => {\n                    console.error(m);\n                    reject(null);\n                });\n        })\n    }\n};\n\n"],"mappings":"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","ignoreList":[]}