{"version":3,"file":"AiAssistantSpeechRecognitionButton.js","names":["React","PropTypes","AiAssistantSpeechRecognitionButton","_React$Component","props","_this","_classCallCheck","_callSuper","_defineProperty","_","SpeechRecognition","window","webkitSpeechRecognition","alert","recognition","lang","onstart","setState","recognizing","onRecognitionStart","onend","onRecognitionEnd","onerror","event","console","error","onresult","transcript","results","onTextRecognition","start","state","_inherits","_createClass","key","value","render","createElement","className","style","onClick","handleStart","disabled","type","children","Component","propTypes","string","object","func"],"sources":["../../react-components/AiAssistant/AiAssistantSpeechRecognitionButton.jsx"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport class AiAssistantSpeechRecognitionButton extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            recognizing: false,\n        }\n    }\n\n    handleStart = _ => {\n        const SpeechRecognition =\n            window.SpeechRecognition || window.webkitSpeechRecognition;\n\n        if (!SpeechRecognition) {\n            alert('Sembra che non sia possibile avviare il riconoscimento della voce su questo dispositivo');\n            return;\n        }\n\n        const recognition = new SpeechRecognition();\n        recognition.lang = this.props.lang;\n\n        recognition.onstart = () => {\n            this.setState({recognizing: true});\n            if (this.props.onRecognitionStart) this.props.onRecognitionStart();\n        };\n\n        recognition.onend = () => {\n            this.setState({recognizing: false});\n            if (this.props.onRecognitionEnd) this.props.onRecognitionEnd();\n        };\n\n        recognition.onerror = (event) => {\n            console.error('Speech recognition error:', event.error);\n            this.setState({recognizing: false});\n        };\n\n        recognition.onresult = (event) => {\n            const transcript = event.results[0][0].transcript;\n            this.props.onTextRecognition(transcript);\n        };\n\n        recognition.start();\n    }\n\n\n\n    render() {\n        return (\n            <button className={this.props.className} style={this.props.style} onClick={this.handleStart}\n                    disabled={this.state.recognizing} type={\"button\"}>\n                {this.props.children}\n            </button>\n        );\n    }\n}\n\nAiAssistantSpeechRecognitionButton.propTypes = {\n    className: PropTypes.string,\n    type: PropTypes.string,\n    style: PropTypes.object,\n    onTextRecognition: PropTypes.func,\n    onRecognitionEnd: PropTypes.func,\n    onRecognitionStart: PropTypes.func,\n    lang: PropTypes.string\n}\n"],"mappings":"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","ignoreList":[]}